from aiogram import Router
from aiogram.filters import Command
from aiogram.types import Message

from database import get_cg_key
from keyboards import auth_kb, main_kb

router = Router()

success_text = (
    "–í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω!\n\n"
    "–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –±–æ—Ç–∞.\n"
    "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n\n"
    "üí∞ –¶–µ–Ω—ã –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è\n"
    "/price <–º–æ–Ω–µ—Ç–∞> <–≤–∞–ª—é—Ç–∞> ‚Äî —Ü–µ–Ω–∞ –º–æ–Ω–µ—Ç—ã\n"
    "/convert <–∏–∑> <–≤> <–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ> ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç\n\n"
    "üèÜ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä—ã–Ω–∫–µ\n"
    "/coin <id> ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–Ω–µ—Ç–µ\n"
    "/search <–Ω–∞–∑–≤–∞–Ω–∏–µ> ‚Äî –ø–æ–∏—Å–∫ –º–æ–Ω–µ—Ç—ã\n"
    "‚è∞ –ê–ª–µ—Ä—Ç—ã\n"
    "/alert <–º–æ–Ω–µ—Ç–∞> <–≤—ã—à–µ/–Ω–∏–∂–µ> <–∑–Ω–∞—á–µ–Ω–∏–µ> [–≤–∞–ª—é—Ç–∞] ‚Äî —Å–æ–∑–¥–∞—Ç—å –∞–ª–µ—Ä—Ç\n"
    "/alert_remove <id> ‚Äî —É–¥–∞–ª–∏—Ç—å –∞–ª–µ—Ä—Ç\n\n"
    "–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å!"
)

@router.message(Command('start'))
async def cmd_start(message: Message):
    await message.answer(f"–ü—Ä–∏–≤–µ—Ç {message.from_user.full_name}\n"
                         "–Ø –±–æ—Ç —Ç—Ä–µ–∫–µ—Ä –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç –∏ –∏–º–µ—é —Å–ª–µ–¥—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª\n"
                         "–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ",
                         reply_markup=auth_kb)
    
@router.message(Command("help"))
async def cmd_help(message: Message):
    text = (
        "üÜò –ü–æ–º–æ—â—å –ø–æ –∫–æ–º–∞–Ω–¥–∞–º\n\n"
        "–í–æ—Ç —á—Ç–æ —è —É–º–µ—é:\n\n"
        "üí∞ –¶–µ–Ω—ã –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è\n"
        "/price <–º–æ–Ω–µ—Ç–∞> <–≤–∞–ª—é—Ç–∞> ‚Äî —É–∑–Ω–∞—Ç—å —Ü–µ–Ω—É –º–æ–Ω–µ—Ç—ã\n"
        "/convert <–∏–∑> <–≤> <–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ> ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫—Ä–∏–ø—Ç—ã\n\n"
        "üèÜ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä—ã–Ω–∫–µ\n"
        "/coin <id> ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–Ω–µ—Ç–µ\n"
        "/coins ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–Ω–µ—Ç\n"
        "/search <–Ω–∞–∑–≤–∞–Ω–∏–µ> ‚Äî –ø–æ–∏—Å–∫ –º–æ–Ω–µ—Ç—ã\n"
        "‚≠ê –¢–æ–ø 10 ‚Äî —Ç–æ–ø –º–æ–Ω–µ—Ç –ø–æ –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏–∏\n"
        "üî• –¢—Ä–µ–Ω–¥—ã ‚Äî —á—Ç–æ —Å–µ–π—á–∞—Å –≤ —Ç–æ–ø–µ –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\n\n"
        "üîî –ê–ª–µ—Ä—Ç—ã\n"
        "/alert <coin> <–≤—ã—à–µ/–Ω–∏–∂–µ> <—Ü–µ–Ω–∞> [–≤–∞–ª—é—Ç–∞] ‚Äî —Å–æ–∑–¥–∞—Ç—å –∞–ª–µ—Ä—Ç\n"
        "/alert_remove <id> ‚Äî —É–¥–∞–ª–∏—Ç—å –∞–ª–µ—Ä—Ç\n"
        "üîî –ú–æ–∏ –∞–ª–µ—Ä—Ç—ã ‚Äî —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–ª–µ—Ä—Ç–æ–≤\n\n"
        "üßë‚Äçüíª –ê–∫–∫–∞—É–Ω—Ç\n"
        "–í—Ö–æ–¥/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å API Key"
    )
    await message.answer(text, reply_markup=main_kb)


@router.message(Command("about"))
async def cmd_about(message: Message):
    text = (
        "‚ÑπÔ∏è –û –±–æ—Ç–µ\n\n"
        "–≠—Ç–æ—Ç –±–æ—Ç —è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∏–ø—Ç–æ-—Ç—Ä–µ–∫–µ—Ä–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å CoinGecko API.\n\n"
        "üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:\n"
        "‚Ä¢ —Ü–µ–Ω—ã –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç\n"
        "‚Ä¢ —Ç–æ–ø-10 –º–æ–Ω–µ—Ç\n"
        "‚Ä¢ —Ç—Ä–µ–Ω–¥—ã\n"
        "‚Ä¢ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –º–æ–Ω–µ—Ç–∞–º\n"
        "‚Ä¢ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫—Ä–∏–ø—Ç–æ ‚Üí –∫—Ä–∏–ø—Ç–æ\n"
        "‚Ä¢ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∞–ª–µ—Ä—Ç—ã) –ø–æ —Ü–µ–Ω–µ\n\n"
        "üß© –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: TimaDinoSuperPuper\n"
        "‚öôÔ∏è –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: Aiogram 3\n"
        "üåê –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö: CoinGecko API\n\n"
        "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –±–æ—Ç–∞!"
    )
    await message.answer(text, reply_markup=main_kb)